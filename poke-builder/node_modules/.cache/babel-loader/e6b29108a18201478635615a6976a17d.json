{"ast":null,"code":"import _objectSpread from\"D:/ITCoursesProjects/React/PokeBuilder/poke-builder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:/ITCoursesProjects/React/PokeBuilder/poke-builder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/ITCoursesProjects/React/PokeBuilder/poke-builder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"D:/ITCoursesProjects/React/PokeBuilder/poke-builder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/ITCoursesProjects/React/PokeBuilder/poke-builder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Modal from'../../components/UI/Modal/Modal';import Auxilliary from'../Auxilliary';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var withErrorHandler=function withErrorHandler(WrappedComponent,axios){return/*#__PURE__*/function(_Component){_inherits(_class2,_Component);var _super=_createSuper(_class2);function _class2(){var _this;_classCallCheck(this,_class2);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={error:null};_this.errorConfirmedHandler=function(){_this.setState({error:null});};return _this;}_createClass(_class2,[{key:\"componentWillMount\",value:function componentWillMount(){var _this2=this;this.reqInterceptor=axios.interceptors.request.use(function(req){_this2.setState({error:null});return req;});this.reqInterceptor=axios.interceptors.response.use(function(res){return res;},function(error){_this2.setState({error:error});});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){//release axios interceptors to prevent memory leak\naxios.interceptors.request.eject(this.reqInterceptor);axios.interceptors.response.eject(this.reqInterceptor);}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(Auxilliary,{children:[/*#__PURE__*/_jsx(Modal,{show:this.state.error,modalClosed:this.errorConfirmedHandler,children:this.state.error?this.state.error.message:null}),/*#__PURE__*/_jsx(WrappedComponent,_objectSpread({},this.props))]});}}]);return _class2;}(Component);};export default withErrorHandler;","map":{"version":3,"sources":["D:/ITCoursesProjects/React/PokeBuilder/poke-builder/src/hoc/withErrorHandler/withErrorHandler.js"],"names":["React","Component","Modal","Auxilliary","withErrorHandler","WrappedComponent","axios","state","error","errorConfirmedHandler","setState","reqInterceptor","interceptors","request","use","req","response","res","eject","message","props"],"mappings":"i0BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,iCAAlB,CACA,MAAOC,CAAAA,UAAP,KAAuB,eAAvB,C,wFAEA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,gBAAD,CAAmBC,KAAnB,CAA6B,CAClD,oUAEIC,KAFJ,CAEY,CACJC,KAAK,CAAE,IADH,CAFZ,OAoBIC,qBApBJ,CAoB2B,UAAK,CACxB,MAAKC,QAAL,CAAc,CAAEF,KAAK,CAAE,IAAT,CAAd,EACH,CAtBL,qEAMI,6BAAqB,iBACjB,KAAKG,cAAL,CAAsBL,KAAK,CAACM,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,SAAAC,GAAG,CAAI,CACxD,MAAI,CAACL,QAAL,CAAc,CAAEF,KAAK,CAAE,IAAT,CAAd,EACA,MAAOO,CAAAA,GAAP,CACH,CAHqB,CAAtB,CAIA,KAAKJ,cAAL,CAAsBL,KAAK,CAACM,YAAN,CAAmBI,QAAnB,CAA4BF,GAA5B,CAAgC,SAAAG,GAAG,QAAIA,CAAAA,GAAJ,EAAnC,CAA4C,SAAAT,KAAK,CAAI,CACvE,MAAI,CAACE,QAAL,CAAc,CAAEF,KAAK,CAAEA,KAAT,CAAd,EACH,CAFqB,CAAtB,CAGH,CAdL,oCAeI,+BAAsB,CAAC;AACnBF,KAAK,CAACM,YAAN,CAAmBC,OAAnB,CAA2BK,KAA3B,CAAiC,KAAKP,cAAtC,EACAL,KAAK,CAACM,YAAN,CAAmBI,QAAnB,CAA4BE,KAA5B,CAAkC,KAAKP,cAAvC,EACH,CAlBL,sBAyBI,iBAAS,CACL,mBACI,MAAC,UAAD,yBACI,KAAC,KAAD,EAAO,IAAI,CAAE,KAAKJ,KAAL,CAAWC,KAAxB,CACI,WAAW,CAAE,KAAKC,qBADtB,UAEK,KAAKF,KAAL,CAAWC,KAAX,CAAmB,KAAKD,KAAL,CAAWC,KAAX,CAAiBW,OAApC,CAA8C,IAFnD,EADJ,cAKI,KAAC,gBAAD,kBAAsB,KAAKC,KAA3B,EALJ,GADJ,CASH,CAnCL,qBAAqBnB,SAArB,EAqCH,CAtCD,CAwCA,cAAeG,CAAAA,gBAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport Modal from '../../components/UI/Modal/Modal';\r\nimport Auxilliary from '../Auxilliary';\r\n\r\nconst withErrorHandler = (WrappedComponent, axios) => {\r\n    return class extends Component {\r\n\r\n        state = {\r\n            error: null\r\n        }\r\n\r\n        componentWillMount() {\r\n            this.reqInterceptor = axios.interceptors.request.use(req => {\r\n                this.setState({ error: null });\r\n                return req;\r\n            });\r\n            this.reqInterceptor = axios.interceptors.response.use(res => res, error => {\r\n                this.setState({ error: error });\r\n            });\r\n        }\r\n        componentWillUnmount(){//release axios interceptors to prevent memory leak\r\n            axios.interceptors.request.eject(this.reqInterceptor);\r\n            axios.interceptors.response.eject(this.reqInterceptor);\r\n        }\r\n\r\n        errorConfirmedHandler= ()=> {\r\n            this.setState({ error: null });\r\n        }\r\n\r\n\r\n        render() {\r\n            return (\r\n                <Auxilliary>\r\n                    <Modal show={this.state.error}\r\n                        modalClosed={this.errorConfirmedHandler}>\r\n                        {this.state.error ? this.state.error.message : null}\r\n                    </Modal>\r\n                    <WrappedComponent {...this.props} />\r\n                </Auxilliary>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default withErrorHandler;"]},"metadata":{},"sourceType":"module"}